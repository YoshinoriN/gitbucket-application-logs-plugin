@(defaultSettings: net.yoshinorin.gitbucket.logs.models.DefaultSettings,
  log: Either[String, net.yoshinorin.gitbucket.logs.models.Log])(implicit context: gitbucket.core.controller.Context)
@import context._
@import net.yoshinorin.gitbucket.logs.utils.Error
@gitbucket.core.html.main("Application Logs") {
  @gitbucket.core.admin.html.menu("logs") {
    @net.yoshinorin.gitbucket.logs.html.navigation(context)
    @log match {
      case Left => { net.yoshinorin.gitbucket.logs.utils.Error.FAILURE }
      case Right(v) => {
        <form id="get-log-from-tail" action="@context.path/admin/logs/gitbucketlog" method="get" class="form-inline">
          <div class="form-group">
            <button type="submit button" class="btn btn-default">
              <i class="glyphicon glyphicon-refresh"></i>
            </button>
            <input type="text" value="@v.displayedLines" name="lines" class="form-control" placeholder="@v.displayedLines"/>
            lines were display from the tail of log. You can specify the number of displayed lines value less than @defaultSettings.displayLimitLines. Default is @defaultSettings.defaultDisplayLines.
          </div>
        </form><br>
        @defaultSettings.logBackInfo.logFilePath match {
          case None => { net.yoshinorin.gitbucket.logs.utils.Error.FAILURE }
          case Some(v) => {
            <div class="box-header">
              <span class="glyphicon glyphicon-file">
                <span class="label label-default ">@v</span>
              </span>
            </div>
          }
        }
        <div class="box-content-bottom">
          <pre class="prettyprint linenums blob">
            @for(x <- v.log) {@x
            }
          </pre>
        </div>
      }
    }
  }
}