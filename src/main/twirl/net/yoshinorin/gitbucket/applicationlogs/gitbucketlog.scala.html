@import scala.collection.mutable.ArrayBuffer

@(defaultDisplayLines: Int,
  displayLimitLines: Int,
  log: Either[net.yoshinorin.gitbucket.applicationlogs.utils.Error, ArrayBuffer[String]],
  lineNums: Int)(implicit context: gitbucket.core.controller.Context)

@import context._
@import net.yoshinorin.gitbucket.applicationlogs.utils.Error

@gitbucket.core.html.main("Application Logs") {
  @gitbucket.core.admin.html.menu("applicationlogs") {
    @net.yoshinorin.gitbucket.applicationlogs.html.navigation(context)
    @log match {
      case Left(e) => { @e.message }
      case Right(v) => {
        <form id="get-log-from-tail" action="@context.path/admin/application-logs/gitbucketlog" method="get" class="form-inline">
          <div class="form-group">
            <button type="submit button" class="btn btn-default">
              <i class="glyphicon glyphicon-refresh"></i>
            </button>
            <input type="text" value="@lineNums" name="lines" class="form-control" placeholder="@lineNums"/>
            lines were display from the tail of log. You can specify the number of displayed lines value less than @displayLimitLines. Default is @defaultDisplayLines.
          </div>
        </form>
        <br>
        <div class="box-content-bottom">
          <pre class="prettyprint linenums blob">
            @for(x <- v) { @x
            }
          </pre>
        </div>
      }
    }
  }
}